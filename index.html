<!DOCTYPE html>
<html>

<head>
    <title>Sounds</title>
    <link href="soundsStyle.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    
</head>

<body class=".container-fluid " id="page" onkeydown="resultCharCode(event)">

    <div id="content">
        <h1 class="heading">Feeling bored with keys sound. Try Now its interesting </h1>
        <div class="btn-group buttons">
            <button onclick="playMusic(this)" class="musical-key" data-audio="clap" id="a">A <br>clap</button>
            <button onclick="playMusic(this)" class="musical-key" data-audio="hihat" id="s">S<br>hihat</button>
            <button onclick="playMusic(this)" class="musical-key" data-audio="kick" id="d">D<br>Kick</button>
            <button onclick="playMusic(this)" class="musical-key" data-audio="openhat" id="f">F<br>Openhat</button>
            <button onclick="playMusic(this)" class="musical-key" data-audio="boom" id="g">G<br>Boom</button>
            <button onclick="playMusic(this)" class="musical-key" data-audio="ride" id="h">H<br>Ride</button>
            <button onclick="playMusic(this)" class="musical-key" data-audio="snare" id="j">J<br>Snare</button>
            <button onclick="playMusic(this)" class="musical-key" data-audio="tom" id="k">K<br>Tom</button>
            <button onclick="playMusic(this)" class="musical-key" data-audio="tink" id="l">L<br>Tink</button>
        </div>
        <div style="clear: both;"></div>
        <button onclick="startRecord()" id='start-recording' record='false'>Start Record</button>
        <p id='comment' style="visibility: hidden;">Your Sounds Are Recording</p>
        <button onclick="stopRecord()" id='stop-recording' style="visibility: hidden;">Stop Record</button>
        <button onclick="playRecorded()" id='play-recording' style="visibility: hidden;">Play</button>
    </div>

   <!-- <script>
        if(localStorage.getItem("sound-intervals")!=null){
            document.getElementById("play-recording").style.visibility='visible';
        }
        function resultCharCode(event) {
            var ch = event.key;
            document.getElementById(ch.toLowerCase()).click();
        }
        var starttime;
        function startRecord(){
            starttime=Date.now();
            document.getElementById("start-recording").removeAttribute("record");
            document.getElementById("start-recording").setAttribute("record","true");
            document.getElementById("comment").style.visibility='visible';
            document.getElementById("stop-recording").style.visibility='visible';
            document.getElementById("play-recording").style.visibility='visible';
        }

        function stopRecord(){
            document.getElementById("start-recording").removeAttribute("record");
            document.getElementById("start-recording").setAttribute("record","false");
            document.getElementById("comment").style.visibility='hidden';
        }

        function createNote(source){
            var image=document.createElement('img');
            var id=Date.now().toString();
            image.setAttribute('id',id);
            image.src=source+".jpg";
            image.style.width='40px';
            image.style.height='40px';
            image.classList.add('img-fly');
            document.getElementById("page").appendChild(image);
            setInterval(() => {
                document.getElementById("page").removeChild(image);
            }, 2000);
        }

        function playRecorded(musicSounds,intervals,index){
            musicSounds=musicSounds||JSON.parse(localStorage.getItem("sounds-data"));
            intervals=intervals||JSON.parse(localStorage.getItem("sound-intervals"));
            index=index||0;
            if(musicSounds.length<index)
            return;
            new Audio(`${musicSounds[index]}.wav`).play();
                setTimeout(() => {  
                   // new Audio(`${musicSounds[index]}.wav`).play();
                   index=index+1;
                   playRecorded(musicSounds,intervals,index);
                }, intervals[index]);
        }
        
        var sounds=[];
        var timeIntervals=[];
        function playMusic(event) {
            var sound=event.getAttribute("data-audio");
            var currentElementId= event.getAttribute("id");
            createNote(sound);
            var audioPlayer = new Audio(`${sound}.wav`);
            document.getElementById(currentElementId).classList.add('play'); 
            //document.getElementById("musical-notes").style.visibility='visible';
            //document.getElementById("content").classList.add('music');
            setInterval(() => {
                document.getElementById(currentElementId).classList.remove('play');
                //document.getElementById("musical-notes").style.visibility='hidden';
            }, 2000);
            var record=document.getElementById("start-recording").getAttribute("record");
            if(record=="true"){
                sounds.push(sound);
                var delay=Date.now()-starttime;
                starttime=Date.now();
                timeIntervals.push(delay);
                localStorage.setItem("sounds-data",JSON.stringify(sounds));
                localStorage.setItem("sound-intervals",JSON.stringify(timeIntervals));
            }
            audioPlayer.play();
        }
    </script>-->
    <script src="musicScript.js" ></script>
</body>

</html>